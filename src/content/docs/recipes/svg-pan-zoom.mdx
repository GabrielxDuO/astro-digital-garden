---
title: SVG pan and zoom
tags: [component]
---

## Installation

import { Steps } from "@astrojs/starlight/components";

<Steps>

1. Install dependencies

   ```bash
   pnpm add svg-pan-zoom-gesture
   ```

2. Add `svgpanzoom.ts`

   ```ts
   // src/components/svgpanzoom.ts
   import "svg-pan-zoom-gesture/css/SvgPanZoomUi.css";
   import { SvgPanZoomUi } from "svg-pan-zoom-gesture";

   document
     .querySelectorAll(
       ".sl-markdown-content > svg:not(.icon)," +
         ".sl-markdown-content > p > svg:not(.icon)," +
         ".sl-markdown-content img[src$='.svg' i]," +
         ".sl-markdown-content img[src$='f=svg' i]" // for development environment
     )
     .forEach((element) => {
       if (element.parentElement?.tagName === "PICTURE") {
         element = element.parentElement;
       }
       const container = document.createElement("figure");
       container.classList.add("svg-pan-zoom", "not-content");
       element.replaceWith(container);
       container.append(element);
       // @ts-expect-error
       new SvgPanZoomUi({ element, container }).on();
     });
   ```

3. Use `svgpanzoom.ts` in the base layout

</Steps>

### Starlight specific code

<Steps>

1.  Use `svgpanzoom.ts` in the `PageFrame`

    ```astro
    // src/components/PageFrame.astro
    ---
    import type { Props } from "@astrojs/starlight/props";
    import Default from "@astrojs/starlight/components/PageFrame.astro";
    ---

    <Default {...Astro.props}>
      <slot name="header" slot="header" />
      <slot name="sidebar" slot="sidebar" />
      <slot />
    </Default>

    <script>
      import "./svgpanzoom.ts";
    </script>
    ```

2.  Override `PageFrame` in Astro config

    ```js
    // astro.config.mjs
    import { defineConfig } from "astro/config";
    import starlight from "@astrojs/starlight";

    export default defineConfig({
      integrations: [
        starlight({
          components: {
            PageFrame: "./src/components/PageFrame.astro",
          },
        }),
      ],
    });
    ```

</Steps>

## Further improvements

- [ ] style svg-pan-zoom buttons
- [ ] provide container in HTML, instead of generating it on the fly
- [ ] first double click should do zoom-in, like in iPhone. Second double click should do reset
